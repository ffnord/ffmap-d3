<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <title>Freifunk - Knotenkarte</title>
    <link rel="stylesheet" type="text/css" href="css/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="css/geomap.css" />

    <style type="text/css">
      #map {
        width: 100%;
        box-sizing:border-box;
      }
      .olPopup p { margin:0px; }
      .nodePopup { font-size: 0.8em; }
      .nodePopup .label { font-weight: bold; }
    </style>

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.1/d3.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.2/leaflet.js"></script>
    <script type="text/javascript" src="geomap_compiled.js"></script>

    <script type="text/javascript">
      window.onresize = resize

      function getOffset( el ) {
        var _x = 0, _y = 0

        while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {
          _x += el.offsetLeft - el.scrollLeft
          _y += el.offsetTop - el.scrollTop
          el = el.offsetParent
        }
        return { top: _y, left: _x }
      }

      function resize() {
        var offset = getOffset(document.getElementById('map'))

        var w = window.innerWidth - offset.left
        var h = window.innerHeight - offset.top - 1

        d3.select("#map").style("width", w+"px").style("height", h+"px")
      }
    </script>
  </head>

  <body onload="resize(); init()">
    <header>
      <h1><a href="/" id="sitelink">www.freifunk.net</a></h1>
      <ul>
        <li><a href="graph.html">Graph</a></li>
        <li><a href="geomap.html">Karte</a></li>
        <li><a href="list.html">Liste</a></li>
      </ul>
      <button id="gpsbutton">Koordinaten beim n√§chsten Klick anzeigen</button>
    </header>
    <div id="map"></div>
    <noscript>
      <br>
      This site only works with javascript
    </noscript>
  </body>
</html>
